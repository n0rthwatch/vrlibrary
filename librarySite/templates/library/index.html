{% extends "base.html" %}
{% load static %}
{% block title %}Главная{% endblock title %}
{% block content %}
	<div class="container mx-auto">
		<div class="flex gap-12 mt-12 mb-10">
			<div class="slider-block w-4/5">
				<div class="splide">
					<div class="splide__track mb-2 rounded-2xl">
						<ul class="splide__list">
							<li class="splide__slide">
								<img src="{% static 'images/banner-1.jpg' %}" alt="" class="">
							</li>
							<li class="splide__slide">
								<img src="{% static 'images/banner-2.jpg' %}" alt="" class="">
							</li>
							<li class="splide__slide">
								<img src="{% static 'images/banner-3.jpg' %}" alt="" class="">
							</li>
							<li class="splide__slide">
								<img src="{% static 'images/banner-1.jpg' %}" alt="" class="">
							</li>
							<li class="splide__slide">
								<img src="{% static 'images/banner-1.jpg' %}" alt="" class="">
							</li>
						</ul>
					</div>
					<div class="my-slider-progress">
						<div class="my-slider-progress-bar"></div>
					</div>
				</div>
			</div>
			<div class="w-1/5 block">
				<div class="flex flex-col justify-start items-start h-full">
					<img src="{% static 'images/logo_dark.png' %}" alt="" class="w-full h-max object-contain mb-10">
					<h2 class="text-4xl font-semibold text-center leading-[3rem]">Современная библиотека</h2>
					<a href="{% url 'books' %}?order_by=-downloads_count"
					   class="nav-link w-full text-lg font-semibold mt-auto text-center mx-auto">Читать</a>
				</div>
			</div>
		</div>

		<h2 class="mb-8 border-b-2 border-accent/20 py-10 text-4xl font-semibold">
			Популярные книги:
		</h2>

		<section
			class="mb-10 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
		>
			{% for book in popular %}
				<article
					class="book-card flex flex-col items-center justify-start rounded-xl bg-accent/5 p-6"
				>
					<div class="book-header mb-4">
						<img
							src="{{ book.image.url }}"
							alt="{{ book.title }}"
							class="max-h-[18rem] w-full"
						/>
					</div>
					<div class="book-body mb-4 w-full">
						<p class="title text-md text-center">{{ book.title }}</p>
					</div>
					<div
						class="book-footer mt-auto flex w-full flex-col items-center justify-between"
					>
						<p class="mb-3 text-center text-sm text-accent/80">
							{{ book.author.name }}
						</p>
						<div class="mb-3 flex w-full flex-row items-center justify-between">
							<div title="Количество скачиваний" class="flex items-center gap-2">
								<div class="rounded-sm bg-accent/50 p-0.5">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										viewBox="0 0 20 20"
										fill="currentColor"
										class="h-4 w-4 stroke-2 text-main"
									>
										<path
											fill-rule="evenodd"
											d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z"
											clip-rule="evenodd"
										></path>
									</svg>
								</div>
								<p class="h-min leading-none">{{ book.downloads_count }}</p>
							</div>
							<div title="Количество страниц" class="flex items-center gap-2">
								<p class="h-min leading-none">{{ book.pages_count }}</p>
								<div class="rounded-sm bg-accent/50 p-0.5">
									<svg xmlns="http://www.w3.org/2000/svg"
									     viewBox="0 0 24 24"
									     fill="currentColor"
									     class="h-4 w-4 stroke-2 text-main">
										<path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z"></path>
										<path d="M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z"></path>
									</svg>

								</div>
							</div>
						</div>
						<a
							href="/books/{{ book.id }}"
							class="ease w-full rounded-md bg-transparent py-2 text-center text-accent outline outline-1 outline-accent/70 transition-all hover:bg-accent hover:text-main"
						>Подробнее...</a
						>
					</div>
				</article>
			{% endfor %}
		</section>

		<h2 class="mb-8 border-b-2 border-accent/20 py-10 text-4xl font-semibold">
			Новинки:
		</h2>

		<section
			class="mb-10 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
		>
			{% for book in new %}
				<article
					class="book-card flex flex-col items-center justify-start rounded-xl bg-accent/5 p-6"
				>
					<div class="book-header mb-4">
						<img
							src="{{ book.image.url }}"
							alt="{{ book.title }}"
							class="max-h-[18rem] w-full"
						/>
					</div>
					<div class="book-body mb-4 w-full">
						<p class="title text-md text-center">{{ book.title }}</p>
					</div>
					<div
						class="book-footer mt-auto flex w-full flex-col items-center justify-between"
					>
						<p class="mb-3 text-center text-sm text-accent/80">
							{{ book.author.name }}
						</p>
						<div class="mb-3 flex w-full flex-row items-center justify-between">
							<div title="Количество скачиваний" class="flex items-center gap-2">
								<div class="rounded-sm bg-accent/50 p-0.5">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										viewBox="0 0 20 20"
										fill="currentColor"
										class="h-4 w-4 stroke-2 text-main"
									>
										<path
											fill-rule="evenodd"
											d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z"
											clip-rule="evenodd"
										></path>
									</svg>
								</div>
								<p class="h-min leading-none">{{ book.downloads_count }}</p>
							</div>
							<div title="Количество страниц" class="flex items-center gap-2">
								<p class="h-min leading-none">{{ book.pages_count }}</p>
								<div class="rounded-sm bg-accent/50 p-0.5">
									<svg xmlns="http://www.w3.org/2000/svg"
									     viewBox="0 0 24 24"
									     fill="currentColor"
									     class="h-4 w-4 stroke-2 text-main">
										<path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z"></path>
										<path d="M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z"></path>
									</svg>

								</div>
							</div>
						</div>
						<a
							href="/books/{{ book.id }}"
							class="ease w-full rounded-md bg-transparent py-2 text-center text-accent outline outline-1 outline-accent/70 transition-all hover:bg-accent hover:text-main"
						>Подробнее...</a
						>
					</div>
				</article>
			{% endfor %}
		</section>

		<h2 class="mb-8 border-b-2 border-accent/20 py-10 text-4xl font-semibold">
			Новости:
		</h2>

		<section class="mb-10 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
			{% for news in news_feed %}
				<article
					class="news-card flex flex-col items-start justify-start rounded-xl bg-accent/5 p-6"
				>
					<div class="news-header mb-4 w-full">
						<img src="{{ news.image.url }}" alt="{{ news.title }}" class="w-full h-44 object-cover">
					</div>
					<div class="news-body mb-4 w-full">
						<p class="title text-md mb-4 text-center">{{ news.title }}</p>
						<p class="mb-3 text-left text-sm text-accent/80 line-clamp-3 overflow-ellipsis overflow-hidden">
							{{ news.description }}
						</p>
					</div>
					<p class="text-accent mt-auto font-semibold text-left"> {{ news.date }}</p>
				</article>
			{% endfor %}
		</section>
		<a href="{% url 'news' %}" class="nav-link w-48 text-center mx-auto">Посмотреть ещё</a>
	</div>
{% endblock content %}
