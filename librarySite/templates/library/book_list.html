{% extends "base.html" %} {% load static %} {% block title %} Библиотека
{% endblock title %} {% block content %}
	<div class="container mx-auto">
		<h1 class="mb-8 border-b-2 border-accent/20 py-10 text-4xl font-semibold">
			Книги
		</h1>

		{% if books_list %}
			<div class="interfaces mb-4">
				<div class="dropdown mb-6">
					<div class="relative inline-block text-left dropdown-block">
						<div>
							<button type="button"
							        class="dropdown-btn inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-4 py-2.5 text-sm font-semibold text-accent shadow-sm ring-1 ring-inset ring-accent/30">
								Упорядочить по
								<svg class="-mr-1 h-5 w-5 text-accent-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
									<path fill-rule="evenodd"
									      d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
									      clip-rule="evenodd"></path>
								</svg>
							</button>
						</div>

						<div class="dropdown-menu hidden absolute left-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
							<div class="py-1">
								<a href="{% url 'books' %}?order_by=-downloads_count" class="dropdown-menu-item">
									<span>Количеству загрузок</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z"
										      clip-rule="evenodd"/>
									</svg>
								</a>
								<a href="{% url 'books' %}?order_by=downloads_count" class="dropdown-menu-item">
									<span>Количеству загрузок</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
								<a href="{% url 'books' %}?order_by=-pages_count" class="dropdown-menu-item">
									<span>Количеству страниц</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
								<a href="{% url 'books' %}?order_by=pages_count" class="dropdown-menu-item">
									<span>Количеству страниц</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
								<a href="{% url 'books' %}?order_by=-created_at" class="dropdown-menu-item">
									<span>Году создания</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
								<a href="{% url 'books' %}?order_by=created_at" class="dropdown-menu-item">
									<span>Году создания</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
								<a href="{% url 'books' %}?order_by=title" class="dropdown-menu-item">
									<span>Названию</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z"
										      clip-rule="evenodd"/>
									</svg>
								</a>
								<a href="{% url 'books' %}?order_by=-title" class="dropdown-menu-item">
									<span>Названию</span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path fill-rule="evenodd"
										      d="M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z"
										      clip-rule="evenodd"/>
									</svg>

								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="genres-filter">
					<button
						class="genres-show-btn w-full rounded-md py-3 font-semibold outline outline-1 outline-accent/70 transition-all hover:bg-accent hover:text-main"
						type="button"
					>
						Показать фильтр жанров
					</button>
					<div
						class="genres-list hidden"
					>
						<div class="mb-4 flex flex-wrap gap-y-4 gap-x-2 items-center justify-center py-4">
							{% for genre in genres %}
								<a href="{% url 'search' %}?genre={{ genre.name }}" class=""
								><span
									class="text-sm md:text-base whitespace-nowrap text-center rounded-full bg-accent/70 px-3 py-1.5 text-main transition-colors hover:bg-accent"
								>{{ genre.name }}</span></a>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>

			<section
				class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
			>
				{% for book in books_list %}
					<article
						class="book-card flex flex-col items-center justify-start rounded-xl bg-accent/5 p-6"
					>
						<div class="book-header mb-4">
							<img
								src="{{ book.image.url }}"
								alt="{{ book.title }}"
								class="max-h-[18rem] w-full"
							/>
						</div>
						<div class="book-body mb-4 w-full">
							<p class="title text-md text-center">{{ book.title }}</p>
						</div>
						<div
							class="book-footer mt-auto flex w-full flex-col items-center justify-between"
						>
							<p class="mb-3 text-center text-sm text-accent/80">
								{{ book.author.name }}
							</p>
							<div class="mb-3 flex w-full flex-row items-center justify-between">
								<div title="Количество скачиваний" class="flex items-center gap-2">
									<div class="rounded-sm bg-accent/50 p-0.5">
										<svg
											xmlns="http://www.w3.org/2000/svg"
											viewBox="0 0 20 20"
											fill="currentColor"
											class="h-4 w-4 stroke-2 text-main"
										>
											<path
												fill-rule="evenodd"
												d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z"
												clip-rule="evenodd"
											></path>
										</svg>
									</div>
									<p class="h-min leading-none">{{ book.downloads_count }}</p>
								</div>
								<div title="Количество страниц" class="flex items-center gap-2">
									<p class="h-min leading-none">{{ book.pages_count }}</p>
									<div class="rounded-sm bg-accent/50 p-0.5">
										<svg xmlns="http://www.w3.org/2000/svg"
										     viewBox="0 0 24 24"
										     fill="currentColor"
										     class="h-4 w-4 stroke-2 text-main">
											<path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z"></path>
											<path d="M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z"></path>
										</svg>

									</div>
								</div>
							</div>
							<a
								href="/books/{{ book.id }}"
								class="ease w-full rounded-md bg-transparent py-2 text-center text-accent outline outline-1 outline-accent/70 transition-all hover:bg-accent hover:text-main"
							>Подробнее...</a
							>
						</div>
					</article>
				{% endfor %}
			</section>
			{% if page_obj.has_next or page_obj.has_previous %}
				<div class="pagination-bar mx-auto mt-6">
					<div class="pagination-info mx-auto mb-3 text-center">
						<span>Страница № {{ page_obj.number }}</span>
						|
						<span>Всего страниц: {{ page_obj.paginator.num_pages }}</span>
					</div>
					<ul class="mx-auto flex items-center justify-center">
						{% if page_obj.has_previous %} {% if page_obj.has_next %}
							<li><a href="?page=1">В начало</a></li>
							<li>
								<a href="?page={{ page_obj.previous_page_number }}">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"
										></path>
									</svg>
								</a>
							</li>
							<li>
								<a href="?page={{ page_obj.next_page_number }}">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"
										></path>
									</svg>
								</a>
							</li>
							<li><a href="?page={{ page_obj.paginator.num_pages }}">В конец</a></li>
						{% else %}
							<li><a href="?page=1">В начало</a></li>
							<li>
								<a href="?page={{ page_obj.previous_page_number }}">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"
										></path>
									</svg>
								</a>
							</li>
							<li class="opacity-70">
								<a>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"
										></path>
									</svg>
								</a>
							</li>
							<li class="opacity-70"><a>В конец</a></li>
						{% endif %} {% else %}
							<li class="opacity-70"><a>В начало</a></li>
							<li class="opacity-70">
								<a>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"
										></path>
									</svg>
								</a>
							</li>
							<li>
								<a href="?page={{ page_obj.next_page_number }}">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke-width="1.5"
										stroke="currentColor"
										class="h-5 w-5"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"
										></path>
									</svg>
								</a>
							</li>
							<li><a href="?page={{ page_obj.paginator.num_pages }}">В конец</a></li>
						{% endif %}
					</ul>
				</div>
			{% endif %}
		{% else %}
			<h2 class="py-10 text-center text-5xl font-semibold">Книг нет.</h2>
			<a href="{% url 'homepage' %}" class="nav-link w-48 text-center mx-auto">На главную</a>
			</div>
		{% endif %} {% endblock content %}
